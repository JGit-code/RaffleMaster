<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Raffle Master</title>
    <link rel="stylesheet" href="css/root.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components/header.css">
    <link rel="stylesheet" href="css/components/footer.css">
    <link rel="stylesheet" href="css/components/checkout.css">
</head>
<body>
    <!-- Header component -->
    <header class="site-header">
        <div class="logo">
            <a href="/">Raffle Master</a>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/raffles/raffles.html">Raffles</a></li>
                <li><a href="/winners.html">Winners</a></li>
                <li><a href="/how-it-works.html">How It Works</a></li>
                <li><a href="/cart.html" class="cart-link">Cart <span class="cart-count">0</span></a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="checkout-section">
            <div class="container">
                <h1>Checkout</h1>
                
                <div class="checkout-grid">
                    <!-- Checkout Form -->
                    <div class="checkout-form-container">
                        <form id="checkout-form" class="checkout-form">
                            <div class="form-section">
                                <h2>Contact Information</h2>
                                <div class="form-row">
                                    <label for="email">Email Address <span class="required">*</span></label>
                                    <input type="email" id="email" name="email" required placeholder="your@email.com">
                                    <div class="error-message">Please enter a valid email address</div>
                                </div>
                                <div class="form-row">
                                    <label for="phone">Phone Number <span class="required">*</span></label>
                                    <input type="tel" id="phone" name="phone" required placeholder="07123 456789">
                                    <div class="error-message">Please enter a valid phone number</div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <h2>Payment Details</h2>
                                <div class="form-row">
                                    <label for="card-name">Name on Card <span class="required">*</span></label>
                                    <input type="text" id="card-name" name="card-name" required placeholder="John Smith">
                                    <div class="error-message">Please enter the name as it appears on your card</div>
                                </div>
                                <div class="form-row">
                                    <label for="card-number">Card Number <span class="required">*</span></label>
                                    <input type="text" id="card-number" name="card-number" required placeholder="1234 5678 9012 3456">
                                    <div class="error-message">Please enter a valid card number</div>
                                </div>
                                <div class="form-row card-details">
                                    <div class="form-group">
                                        <label for="card-expiry">Expiry Date <span class="required">*</span></label>
                                        <input type="text" id="card-expiry" name="card-expiry" required placeholder="MM/YY">
                                        <div class="error-message">Enter a valid date</div>
                                    </div>
                                    <div class="form-group">
                                        <label for="card-cvc">CVC <span class="required">*</span></label>
                                        <input type="text" id="card-cvc" name="card-cvc" required placeholder="123">
                                        <div class="error-message">Enter a valid CVC</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <h2>Billing Address</h2>
                                <div class="form-row">
                                    <label for="address">Address <span class="required">*</span></label>
                                    <input type="text" id="address" name="address" required placeholder="123 Main St">
                                </div>
                                <div class="form-row">
                                    <label for="city">City <span class="required">*</span></label>
                                    <input type="text" id="city" name="city" required placeholder="London">
                                </div>
                                <div class="form-row card-details">
                                    <div class="form-group">
                                        <label for="postcode">Postcode <span class="required">*</span></label>
                                        <input type="text" id="postcode" name="postcode" required placeholder="SW1A 1AA">
                                    </div>
                                    <div class="form-group">
                                        <label for="country">Country <span class="required">*</span></label>
                                        <select id="country" name="country" required>
                                            <option value="UK">United Kingdom</option>
                                            <option value="US">United States</option>
                                            <option value="CA">Canada</option>
                                            <option value="AU">Australia</option>
                                            <!-- More countries can be added -->
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section terms-section">
                                <div class="form-row checkbox-row">
                                    <input type="checkbox" id="terms" name="terms" required>
                                    <label for="terms">I agree to the <a href="#">Terms & Conditions</a> and <a href="#">Privacy Policy</a> <span class="required">*</span></label>
                                </div>
                                <div class="form-row checkbox-row">
                                    <input type="checkbox" id="marketing" name="marketing">
                                    <label for="marketing">Keep me updated about future raffles and special offers</label>
                                </div>
                            </div>
                            
                            <button type="submit" class="cta-button checkout-submit">Complete Purchase</button>
                        </form>
                    </div>
                    
                    <!-- Order Summary -->
                    <div class="order-summary">
                        <h2>Order Summary</h2>
                        <div class="summary-items" id="summary-items">
                            <!-- Will be populated by JavaScript -->
                        </div>
                        <div class="summary-totals">
                            <div class="summary-row">
                                <span>Subtotal</span>
                                <span id="summary-subtotal">£0</span>
                            </div>
                            <div class="summary-row">
                                <span>Processing Fee</span>
                                <span id="summary-fee">£0</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total</span>
                                <span id="summary-total">£0</span>
                            </div>
                        </div>
                        <div class="security-badges">
                            <div class="security-badge">
                                <img src="/assets/icons/security.svg" alt="Secure Checkout">
                                <span>Secure Checkout</span>
                            </div>
                            <div class="security-badge">
                                <img src="/assets/icons/security.svg" alt="SSL Encrypted">
                                <span>SSL Encrypted</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer component -->
    <footer class="site-footer">
        <div class="footer-grid">
            <div class="footer-column">
                <h4>Raffle Master</h4>
                <p>Making dreams come true, one raffle at a time.</p>
            </div>
            <div class="footer-column">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/winners.html">Winners</a></li>
                    <li><a href="/how-it-works.html">How It Works</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Legal</h4>
                <ul>
                    <li><a href="#">Terms & Conditions</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h4>Contact</h4>
                <ul>
                    <li>Email: support@dreamraffles.com</li>
                    <li>Phone: 01234 567890</li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 Raffle Master. All rights reserved.</p>
        </div>
    </footer>
    <script src="/js/product-modal.js"></script>
    <script src="/js/form-validation.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get cart from localStorage
            const cart = JSON.parse(localStorage.getItem('raffle-cart') || '[]');
            
            // Update cart count
            const cartCountEl = document.querySelector('.cart-count');
            if (cartCountEl) {
                cartCountEl.textContent = cart.length;
            }
            
            // If cart is empty, redirect to cart page
            if (cart.length === 0) {
                window.location.href = '/cart.html';
                return;
            }
            
            // Populate order summary
            const summaryItemsEl = document.getElementById('summary-items');
            const subtotalEl = document.getElementById('summary-subtotal');
            const feeEl = document.getElementById('summary-fee');
            const totalEl = document.getElementById('summary-total');
            
            // Calculate totals
            let subtotal = 0;
            
            // Populate summary items
            cart.forEach(item => {
                const itemTotal = item.quantity * item.price;
                subtotal += itemTotal;
                
                const itemEl = document.createElement('div');
                itemEl.className = 'summary-item';
                itemEl.innerHTML = `
                    <div class="item-name">${item.name}</div>
                    <div class="item-quantity">${item.quantity} ticket${item.quantity > 1 ? 's' : ''}</div>
                    <div class="item-price">£${itemTotal}</div>
                `;
                
                summaryItemsEl.appendChild(itemEl);
            });
            
            // Calculate fee and total
            const fee = Math.max(1, Math.round(subtotal * 0.05)); // 5% fee, minimum £1
            const total = subtotal + fee;
            
            // Update summary totals
            subtotalEl.textContent = `£${subtotal}`;
            feeEl.textContent = `£${fee}`;
            totalEl.textContent = `£${total}`;
        });
    </script>
</body>
</html>
